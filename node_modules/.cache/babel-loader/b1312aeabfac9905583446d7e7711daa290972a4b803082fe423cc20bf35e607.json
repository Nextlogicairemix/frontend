{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sar3e.DESKTOP-RCKHLIM\\\\Documents\\\\remixback\\\\frontend\\\\src\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || \"https://back-thbr.onrender.com\";\nconst ENDPOINTS = {\n  REGISTER: \"/api/auth/register\",\n  LOGIN: \"/api/auth/login\",\n  LOGOUT: \"/api/auth/logout\",\n  ME: \"/api/auth/me\"\n};\nconst apiFetch = async (endpoint, options = {}) => {\n  const defaultOptions = {\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...options.headers\n    }\n  };\n  const response = await fetch(`${API_URL}${endpoint}`, {\n    ...defaultOptions,\n    ...options\n  });\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({\n      error: \"Network error\"\n    }));\n    throw new Error(error.error || \"Something went wrong\");\n  }\n  return response.json();\n};\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    checkAuth();\n  }, []);\n  const checkAuth = async () => {\n    try {\n      const data = await apiFetch(ENDPOINTS.ME);\n      setUser(data);\n    } catch (err) {\n      console.log(\"Not authenticated\");\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const login = async (email, password) => {\n    setError(null);\n    try {\n      const data = await apiFetch(ENDPOINTS.LOGIN, {\n        method: \"POST\",\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      setUser(data.user);\n      return {\n        success: true,\n        user: data.user\n      };\n    } catch (err) {\n      setError(err.message);\n      return {\n        success: false,\n        error: err.message\n      };\n    }\n  };\n  const register = async (name, email, password, accessCode = null) => {\n    setError(null);\n    try {\n      const data = await apiFetch(ENDPOINTS.REGISTER, {\n        method: \"POST\",\n        body: JSON.stringify({\n          name,\n          email,\n          password,\n          access_code: accessCode\n        })\n      });\n      return {\n        success: true,\n        message: data.message\n      };\n    } catch (err) {\n      setError(err.message);\n      return {\n        success: false,\n        error: err.message\n      };\n    }\n  };\n  const logout = async () => {\n    try {\n      await apiFetch(ENDPOINTS.LOGOUT, {\n        method: \"POST\"\n      });\n      setUser(null);\n    } catch (err) {\n      console.error(\"Logout error:\", err);\n    }\n  };\n  const isTeacher = () => (user === null || user === void 0 ? void 0 : user.role) === \"admin\";\n  const isStudent = () => (user === null || user === void 0 ? void 0 : user.role) === \"student\";\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      loading,\n      error,\n      login,\n      register,\n      logout,\n      checkAuth,\n      isTeacher,\n      isStudent\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"PA9FxEY9xSNRrsSqaLtbYei52Hs=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\");\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","ENDPOINTS","REGISTER","LOGIN","LOGOUT","ME","apiFetch","endpoint","options","defaultOptions","credentials","headers","response","fetch","ok","error","json","catch","Error","AuthContext","AuthProvider","children","_s","user","setUser","loading","setLoading","setError","checkAuth","data","err","console","log","login","email","password","method","body","JSON","stringify","success","message","register","name","accessCode","access_code","logout","isTeacher","role","isStudent","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","$RefreshReg$"],"sources":["C:/Users/sar3e.DESKTOP-RCKHLIM/Documents/remixback/frontend/src/AuthContext.js"],"sourcesContent":["\r\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || \"https://back-thbr.onrender.com\";\r\n\r\nconst ENDPOINTS = {\r\n  REGISTER: \"/api/auth/register\",\r\n  LOGIN: \"/api/auth/login\",\r\n  LOGOUT: \"/api/auth/logout\",\r\n  ME: \"/api/auth/me\",\r\n};\r\n\r\n\r\nconst apiFetch = async (endpoint, options = {}) => {\r\n  const defaultOptions = {\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  const response = await fetch(`${API_URL}${endpoint}`, {\r\n    ...defaultOptions,\r\n    ...options,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ error: \"Network error\" }));\r\n    throw new Error(error.error || \"Something went wrong\");\r\n  }\r\n\r\n  return response.json();\r\n};\r\n\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const checkAuth = async () => {\r\n    try {\r\n      const data = await apiFetch(ENDPOINTS.ME);\r\n      setUser(data);\r\n    } catch (err) {\r\n      console.log(\"Not authenticated\");\r\n      setUser(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  const login = async (email, password) => {\r\n    setError(null);\r\n    try {\r\n      const data = await apiFetch(ENDPOINTS.LOGIN, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n      setUser(data.user);\r\n      return { success: true, user: data.user };\r\n    } catch (err) {\r\n      setError(err.message);\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  const register = async (name, email, password, accessCode = null) => {\r\n    setError(null);\r\n    try {\r\n      const data = await apiFetch(ENDPOINTS.REGISTER, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ name, email, password, access_code: accessCode }),\r\n      });\r\n      return { success: true, message: data.message };\r\n    } catch (err) {\r\n      setError(err.message);\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await apiFetch(ENDPOINTS.LOGOUT, { method: \"POST\" });\r\n      setUser(null);\r\n    } catch (err) {\r\n      console.error(\"Logout error:\", err);\r\n    }\r\n  };\r\n\r\n  const isTeacher = () => user?.role === \"admin\";\r\n  const isStudent = () => user?.role === \"student\";\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        loading,\r\n        error,\r\n        login,\r\n        register,\r\n        logout,\r\n        checkAuth,\r\n        isTeacher,\r\n        isStudent,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth must be used within AuthProvider\");\r\n  }\r\n  return context;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}